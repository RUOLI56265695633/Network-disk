### 一、项目概述
1. **项目名称**：基于Springboot + Vue的个人网盘系统
2. **项目类型**：文件存储与管理平台（前后端分离）
3. **目标用户**：
   - **管理员**：负责平台整体运营和管理的人员。
   - **普通用户**：使用平台进行文件上传、下载、分享等操作的注册用户。
4. **功能模块**：
   - 用户注册/登录（带滑块验证）
   - 文件上传、新建文件夹（可包含子文件/文件夹）、查询所有文件/文件夹、递归复制文件、下载文件、重命名文件/文件夹
   - 分类展示文件（全部、图片、视频、压缩文件等）
   - 分享文件（可设置天数）、取消分享、未登录可查看分享文件、下载分享文件
   - 移入回收站、还原文件、永久删除文件
   - 个人信息管理、修改密码
   - 管理员额外功能：
     - 查看文件上传趋势统计图
     - 网盘文件管理
     - 分享管理
     - 垃圾箱管理
     - 公告信息管理
     - 管理员信息管理
     - 用户管理
---

### 二、环境搭建1
#### 1. 开发工具
- **后端**
  - **IntelliJ IDEA** 或其他支持Java开发的IDE（如Eclipse）：用于编写和调试后端代码。  
- **前端**
  - **Visual Studio Code (VS Code)**：轻量级且功能强大的文本编辑器，适合前端开发，提供了丰富的插件支持。  
- **数据库设计与管理**
  - **Navicat Premium**（建议版本不低于16）：可视化工具，用于设计和管理MySQL数据库，简化数据库操作。
#### 2. 开发环境
- **JDK**
  - **版本要求**：1.8
  - **安装说明**：确保正确安装并配置JAVA_HOME环境变量，以便命令行和其他工具能够识别JDK。 
- **Node.js**
  - **版本要求**：16.0+
  - **安装说明**：通过官方提供的安装包进行安装，并确保npm（Node.js的包管理工具）也一并安装，方便后续安装前端依赖。  
- **Maven**
  - **版本要求**：3.8+
  - **安装说明**：Maven是Java项目的构建工具，负责管理项目依赖和执行构建生命周期任务。确保MAVEN_HOME环境变量已设置，并将`bin`目录添加到系统路径中。
#### 3. 数据库环境
- **MySQL**
  - **版本要求**：5.7或8.0
  - **安装说明**：根据操作系统选择合适的MySQL安装包，并完成安装。配置数据库连接参数，确保应用程序可以正常访问数据库。
#### 4. 第三方中间件及工具
- **Redis**：用于缓存数据，如验证码、用户会话信息等。
- **Nginx**：作为反向代理服务器，分发请求至不同的后端服务；同时也可以用于负载均衡和静态资源的托管。
- **Git**：版本控制系统，用于代码管理和协作开发。
---

### 三、项目结构

#### 1. 后端项目结构
- `src/main/java`：存放Java源代码，细分为以下子包：
  - `controller`：包含所有RESTful API控制器类，负责处理HTTP请求。
  - `service`：实现业务逻辑的服务层接口和实现类。
  - `mapper`：定义与数据库交互的持久层接口（MyBatis Mapper）。
  - `entity`：存放实体类，对应数据库中的表结构。
  - `dto`：数据传输对象，用于封装API请求和响应的数据。
  - `vo`：视图对象，专门用于前端展示的数据模型。
  - `exception`：自定义异常类及其处理器。
  - `utils`：工具类，提供通用的功能方法，如日期格式化、字符串处理等。 
- `src/main/resources`：存放非Java资源文件，包括但不限于：
  - `application.properties` 或 `application.yml`：Spring Boot应用配置文件。
  - `mapper.xml`：MyBatis SQL映射文件。
  - 其他静态资源或模板文件（如邮件模板）。 
- `src/test/java`：存放单元测试和集成测试代码，确保各个组件的功能正确性。

#### 2. 前端项目结构
- `src/assets`：存放静态资源，如图片、图标、样式文件（CSS/SCSS）等。
- `src/components`：存放可复用的Vue组件，这些组件可以在不同的页面中使用，提高代码的复用性和开发效率。
- `src/router`：存放路由配置文件，定义了应用的所有路由规则以及它们对应的组件。
- `src/store`：存放Vuex状态管理的相关文件，包括状态、突变、动作等，以集中管理和共享全局状态。
- `src/views`：存放页面级组件，每个页面通常对应一个独立的Vue组件，包含了页面特有的逻辑和布局。
- `src/api`：存放与后端交互的API请求相关代码，通过Axios库发送HTTP请求并与后端通信。
- `src/utils`：存放前端工具类代码，提供辅助函数或常量定义，帮助简化开发过程。
- `src/App.vue`：应用的根组件，是整个应用的入口点，包含了主模板和全局配置。
- `src/main.js`：应用的入口文件，负责初始化Vue实例并挂载到DOM元素上，同时引入全局插件和其他必要的设置。
---

### 四、项目创新
#### 1. **仿百度网盘开发**
- **创新描述**：项目完全模仿百度网盘的功能和界面设计，相似度达到80%，为用户提供熟悉的操作体验。
#### 2. **多层递归查询、复制、删除**
- **创新描述**：实现了对文件夹和文件的多层递归查询、复制和删除功能，极大地提高了文件管理的灵活性和效率。
- **技术实现**：利用深度优先搜索算法遍历文件树结构，确保即使在复杂的嵌套层次下也能高效地完成操作。
#### 3. **登录使用图形验证码**
- **创新描述**：为了增强系统的安全性，采用了图形验证码机制来防止自动化脚本攻击。
- **技术实现**：集成了滑块验证组件，用户需要完成滑动验证才能成功登录，增加了账户的安全性。
#### 4. **巧妙的数据库关联设计**
- **创新描述**：通过精心设计的数据库表结构，实现了高效的文件关联查询，减少了冗余数据。
- **技术实现**：例如，使用外键约束和索引来优化查询性能，确保即使在大数据量的情况下也能保持良好的响应速度。
#### 5. **使用统计图表展示数据变化**
- **创新描述**：管理员可以通过直观的统计图表了解文件上传的趋势，辅助决策。
- **技术实现**：集成ECharts图表库，在后台管理系统中动态展示各种统计数据，如每日文件上传量、用户活跃度等。
---

### 五、功能模块实现
#### 普通用户功能
1. **注册、登录（带滑块验证）**
   - 实现用户注册、登录功能，采用滑块验证提升安全性和用户体验。  
2. **文件操作**
   - 上传文件、新建文件夹（可包含子文件/文件夹）、查询所有文件/文件夹、递归复制文件、下载文件、重命名文件/文件夹。   
3. **分类展示文件**
   - 根据文件类型（全部、图片、视频、压缩文件等）分类展示文件，方便查找。   
4. **分享文件**
   - 支持分享文件并设置有效期，未登录用户也可查看和下载分享文件。   
5. **回收站管理**
   - 提供移入回收站、还原文件、永久删除文件等功能，保护误删的文件。
6. **个人信息管理、修改密码**
   - 用户可以查看和修改自己的个人信息，保障账户安全。

#### 管理员功能
1. **登录、个人信息、修改密码**
   - 实现管理员登录、个人信息查看和修改密码功能。  
2. **文件上传趋势统计图**
   - 查看文件上传趋势统计图，了解平台文件增长情况。  
3. **网盘文件管理**
   - 管理平台上所有用户的文件，包括批量操作和权限控制。  
4. **分享管理**
   - 审核和管理用户分享的文件链接，确保合规性。   
5. **垃圾箱管理**
   - 管理被删除文件的临时存储区，定期清理不再需要的文件。   
6. **公告信息管理**
   - 发布和管理系统公告，及时传达重要信息给用户。   
7. **管理员信息管理**
   - 查看和管理管理员账号信息，分配不同级别的权限。   
8. **用户管理**
   - 查看和管理普通用户信息，保障平台的安全运行。
---
![输入图片说明](imgs/54632f2f5d3f639502d054bdd20daa6.jpg)
![输入图片说明](imgs/b8447a660b34d450a35cca438bcfe91.jpg)
![输入图片说明](imgs/e653aabc249ea4583986c680ad920b4.jpg)
![输入图片说明](imgs/e9d4cc5f972004baee86d2dfe624256.jpg)
![输入图片说明](imgs/fdd8d31a3f2952199d566e18f8b5c7d.jpg)

---

### 六、前后端逻辑交互方式

#### 1. 前端逻辑架构
- **技术栈**：Vue 2.x + Element UI + Vue Router + Vuex + Axios
- **组件结构**：
  - `views/`：页面级组件（登录、首页、文件管理等）
  - `components/`：可复用组件（文件列表、分享组件、回收站等）
  - `utils/`：工具函数（请求封装、日期处理等）
  - `router/`：路由配置（前端路由守卫实现权限控制）
- **状态管理**：
  - Vuex集中管理用户信息、文件列表、分享状态等
  - 模块划分：user、files、share等
- **HTTP通信**：
  - Axios封装统一请求拦截器（添加JWT令牌）
  - 响应拦截器统一处理错误和状态码
- **权限控制**：
  - 路由守卫根据用户角色控制页面访问
  - 组件内根据权限显示/隐藏功能按钮

#### 2. 后端逻辑架构
- **技术栈**：Spring Boot 2.5.9 + MyBatis + MySQL + JWT
- **分层设计**：
  - **Controller层**：处理HTTP请求，参数校验，返回响应
  - **Service层**：实现核心业务逻辑，事务管理
  - **Mapper层**：数据访问层，与数据库交互
  - **Entity层**：数据库表映射实体类
  - **Utils层**：工具类（JWT生成、文件处理等）
- **认证授权**：
  - JWT令牌生成与验证（有效期1小时）
  - 拦截器实现请求鉴权
  - 角色权限控制（ADMIN/USER）
- **异常处理**：
  - 全局异常处理器统一捕获和处理异常
  - 自定义异常类（业务异常、参数异常等）
  - 统一响应格式（code、message、data）

#### 3. 前后端交互流程（以文件上传为例）
1. **请求发起**：
   - 前端选择文件，调用`uploadFile`方法
   - Axios添加JWT令牌到请求头
   - 发送`POST /api/files/upload`请求
2. **身份验证**：
   - 后端`JwtInterceptor`拦截请求
   - 验证令牌有效性和过期时间
   - 解析用户信息存入`ThreadLocal`
3. **请求处理**：
   - `FileController`接收文件流和元数据
   - 调用`FileService.uploadFile()`处理
4. **业务逻辑**：
   - 验证文件大小、类型、用户存储空间
   - 生成唯一文件名和存储路径
   - 保存文件到磁盘
   - 记录文件信息到数据库
5. **数据操作**：
   - `DiskFilesMapper.insert()`保存文件记录
   - 更新用户存储空间使用情况
6. **响应返回**：
   - 构造成功响应：`{code: 200, message: '上传成功', data: fileInfo}`
   - 异常时返回错误信息
7. **前端处理**：
   - 接收响应，更新文件列表
   - 显示上传成功提示
   - 刷新存储空间显示

#### 4. 跨域处理
- **后端配置**：`CorsConfig`类配置跨域允许
  - 允许来源：http://localhost:8080
  - 允许方法：GET/POST/PUT/DELETE
  - 允许头信息：Authorization/Content-Type
  - 允许凭证：true
- **前端配置**：Axios默认配置支持跨域

#### 5. 数据传输格式
- **请求格式**：JSON（非文件请求）或FormData（文件上传）
- **响应格式**：统一JSON格式
  ```json
  {
    "code": 200,          // 状态码
    "message": "成功",     // 提示信息
    "data": {}            // 响应数据
  }
  ```

---

### 七、开发工具作用说明

#### 1. Maven
- **项目构建**：
  - 提供标准的编译、打包、测试、部署流程
  - 项目配置文件：`springboot/pom.xml`
  - 支持多环境构建（开发、测试、生产）
- **依赖管理**：
  - 自动下载和管理Java依赖库（如Spring Boot、MyBatis等）
  - 版本冲突解决机制
  - 依赖范围控制（compile、test、provided等）
- **生命周期管理**：
  - 标准生命周期：clean、compile、test、package、install、deploy
  - 插件生命周期：spring-boot:run（开发启动）、spring-boot:build-image（构建Docker镜像）
- **本项目应用**：
  - 使用`spring-boot-maven-plugin`构建和运行Spring Boot应用
  - 依赖管理：MySQL驱动、MyBatis、JWT、Hutool工具包等
  - 仓库配置：阿里云Maven仓库加速依赖下载

#### 2. Node.js & npm
- **运行环境**：
  - 提供JavaScript的运行时环境
  - 版本要求：Node.js 16.0+，npm 8.0+
- **包管理**：
  - 管理前端项目依赖（Vue、Element UI、Axios等）
  - 配置文件：`vue/package.json`
  - 依赖分类：dependencies（生产依赖）、devDependencies（开发依赖）
- **构建工具**：
  - Vue CLI提供项目脚手架和构建功能
  - 支持热重载、代码压缩、资源优化
- **开发服务器**：
  - 提供本地开发调试环境（默认端口8080）
  - 支持代理配置解决跨域问题
- **本项目应用**：
  - 安装依赖：`npm install`
  - 开发启动：`npm run serve`
  - 生产构建：`npm run build`
  - 依赖：Vue 2.x、Element UI、Vue Router、Vuex、Axios等

#### 3. MyBatis
- **ORM框架**：
  - 半自动化ORM框架，简化Java与数据库交互
  - 配置文件：`springboot/src/main/resources/application.yml`
- **SQL映射**：
  - Mapper接口与XML文件分离（`mapper/`目录下）
  - 支持注解和XML两种方式
- **动态SQL**：
  - `<if>`、`<where>`、`<foreach>`等标签构建灵活查询
  - 支持SQL片段复用
- **缓存机制**：
  - 一级缓存：SqlSession级别，默认开启
  - 二级缓存：Mapper级别，可配置开启
- **本项目应用**：
  - 数据库操作：文件增删改查、用户管理、分享管理等
  - 动态SQL：复杂查询条件构建
  - 结果映射：自动映射到Java实体类

#### 4. JWT (JSON Web Token)
- **认证机制**：
  - 基于Token的无状态认证
  - 令牌结构：Header.Payload.Signature
- **安全特性**：
  - HMAC SHA256加密算法确保数据完整性
  - 可配置过期时间（本项目1小时）
  - 签名验证防止数据篡改
- **认证流程**：
  - 登录成功生成JWT令牌
  - 前端存储在localStorage
  - 请求时添加到Authorization头
  - 后端拦截器验证令牌
- **本项目应用**：
  - 实现用户登录认证
  - 接口权限控制
  - 无状态会话管理

#### 5. Git
- **版本控制**：
  - 记录代码变更历史
  - 支持提交、回滚、分支、合并等操作
- **协作开发**：
  - 支持多人并行开发
  - 远程仓库管理（GitHub、GitLab等）
- **分支策略**：
  - master：主分支（稳定版本）
  - develop：开发分支
  - feature/*：特性分支
  - hotfix/*：修复分支
- **常见命令**：
  - `git init`：初始化仓库
  - `git add .`：添加文件
  - `git commit -m "message"`：提交变更
  - `git push`：推送远程
  - `git pull`：拉取更新

#### 6. Navicat Premium
- **数据库管理**：
  - 可视化管理MySQL、SQL Server等多种数据库
  - 支持多数据库连接管理
- **SQL开发**：
  - 智能SQL编辑器（语法高亮、自动补全）
  - SQL执行计划分析
- **数据操作**：
  - 表结构设计和修改
  - 数据导入导出（SQL、Excel、CSV等）
  - 数据同步和迁移
- **本项目应用**：
  - 数据库结构设计
  - 执行`disk.sql`导入初始数据
  - 数据查询和维护
  - 表结构优化

#### 7. Spring Boot DevTools
- **开发工具**：
  - 支持热重载，修改代码无需重启应用
  - 自动刷新静态资源
  - 提高开发效率

#### 8. ECharts
- **图表库**：
  - 提供丰富的数据可视化图表
  - 支持交互式操作
- **本项目应用**：
  - 管理员后台的文件上传趋势统计
  - 数据可视化展示

---

### 八、项目启动与运行

#### 1. 环境准备
- **Java环境**：JDK 1.8+，配置JAVA_HOME环境变量
- **Node.js环境**：Node.js 16.0+，npm 8.0+
- **MySQL环境**：MySQL 5.7+，已创建`disk`数据库并导入`disk.sql`

#### 2. 后端启动（Spring Boot）
```bash
# 1. 进入后端目录
cd springboot

# 2. （可选）清理项目
mvn clean

# 3. 编译项目
mvn compile

# 4. 启动开发服务器
mvn spring-boot:run
```

**后端启动说明**：
- 配置文件：`springboot/src/main/resources/application.yml`
- 默认端口：9090
- 数据库连接：MySQL `localhost:3306/disk`
- 启动日志：控制台输出，包含启动状态和错误信息
- 热重载：支持Spring Boot DevTools热重载（修改代码自动重启）

#### 3. 前端启动（Vue）
```bash
# 1. 进入前端目录
cd vue

# 2. 安装依赖（首次运行或依赖更新时执行）
npm install

# 3. 启动开发服务器
npm run serve
```

**Vue启动详细说明**：
- **启动机制**：
  - 实际执行命令：`vue-cli-service serve`（由Vue CLI提供）
  - 配置文件：`vue/package.json`中的scripts配置
- **开发服务器**：
  - 默认端口：8080
  - 热重载：支持代码修改实时更新（无需刷新浏览器）
  - 代理配置：自动代理API请求到后端（http://localhost:9090）
- **依赖管理**：
  - 生产依赖：Vue、Element UI、Axios、ECharts等
  - 开发依赖：Vue CLI插件、Babel、Vue模板编译器等
  - 依赖安装：`npm install`会自动安装`package.json`中声明的所有依赖
- **构建工具**：
  - Vue CLI 5.x提供项目脚手架和构建功能
  - 支持环境配置：开发环境（.env.development）和生产环境（.env.production）

#### 4. 访问地址
- **前端应用**：http://localhost:8080
- **后端API**：http://localhost:9090
- **Swagger文档**：http://localhost:9090/swagger-ui.html（如果已配置）

#### 5. 常见启动问题排查
- **后端启动失败**：
  - 检查数据库连接配置（用户名、密码、数据库名）
  - 确认MySQL服务已启动
  - 查看控制台错误信息（通常是端口占用或数据库连接问题）
- **前端启动失败**：
  - 检查Node.js和npm版本
  - 删除`node_modules`和`package-lock.json`后重新执行`npm install`
  - 查看控制台错误信息（通常是依赖冲突或配置错误）
- **前后端交互失败**：
  - 确认两端服务都已启动
  - 检查API地址和端口配置
  - 查看浏览器控制台的网络请求和错误信息

---

### 九、默认账户信息

#### 1. 管理员账户
- 用户名：admin
- 密码：admin

#### 2. 测试用户账户
- 用户名：test
- 密码：test

---